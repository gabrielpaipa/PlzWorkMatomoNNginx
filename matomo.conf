{\rtf1\ansi\ansicpg1252\cocoartf2513
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fnil\fcharset0 Menlo-Bold;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red47\green180\blue29;\red64\green11\blue217;
\red46\green174\blue187;\red180\green36\blue25;}
{\*\expandedcolortbl;;\csgray\c0;\cssrgb\c20238\c73898\c14947;\cssrgb\c32308\c18668\c88227;
\cssrgb\c20196\c73240\c78250;\cssrgb\c76409\c21698\c12524;}
\margl1440\margr1440\vieww10800\viewh8400\viewkind0
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \CocoaLigature0 Last login: Sun Aug 30 18:47:05 on ttys000\
gabrielriverabarreto@MacBook-Pro-de-Gabriel ~ % cd /Users/gabrielriverabarreto/Documents/My\\ life/Perros/Ghost\\ Perhaps        \
gabrielriverabarreto@MacBook-Pro-de-Gabriel Ghost Perhaps % ssh -i "ghostplz.pem" ubuntu@ec2-18-188-151-200.us-east-2.compute.amazonaws.com\
\
Welcome to Ubuntu 18.04.5 LTS (GNU/Linux 5.3.0-1032-aws x86_64)\
\
 * Documentation:  https://help.ubuntu.com\
 * Management:     https://landscape.canonical.com\
 * Support:        https://ubuntu.com/advantage\
\
  System information as of Mon Aug 31 16:26:38 UTC 2020\
\
  System load:  0.0               Processes:           106\
  Usage of /:   44.1% of 7.69GB   Users logged in:     0\
  Memory usage: 56%               IP address for eth0: 172.31.1.96\
  Swap usage:   0%\
\
 * Are you ready for Kubernetes 1.19? It's nearly here! Try RC3 with\
   sudo snap install microk8s --channel=1.19/candidate --classic\
\
   https://microk8s.io/ has docs and details.\
\
 * Canonical Livepatch is available for installation.\
   - Reduce system reboots and improve kernel security. Activate at:\
     https://ubuntu.com/livepatch\
\
15 packages can be updated.\
0 updates are security updates.\
\
\
*** System restart required ***\
Last login: Mon Aug 31 00:47:14 2020 from 193.32.126.226\

\f1\b \cf3 ubuntu@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~
\f0\b0 \cf2 $ su - ussr\
Password: \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~
\f0\b0 \cf2 $ cd /etc/nginx/sites-available\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ ls\

\f1\b \cf5 cafebuenvivir.com-ssl.conf
\f0\b0 \cf2   
\f1\b \cf5 cafebuenvivir.com.conf
\f0\b0 \cf2   default  matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano cafebuenvivir.com-ssl.conf \
[sudo] password for ussr: \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano cafebuenvivir.com.conf \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ cd ..\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx
\f0\b0 \cf2 $ cd sites-enabled\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ sudo ln -s ../sites-available/matomo.conf\
ln: failed to create symbolic link './matomo.conf': File exists\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ rm matomo.conf\
rm: cannot remove 'matomo.conf': Permission denied\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ sudo rm matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ sudo ln -s ../sites-available/matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ sudo nginx -t\
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\
nginx: configuration file /etc/nginx/nginx.conf test is successful\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ sudo systemctl restart nginx\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-enabled
\f0\b0 \cf2 $ cd ..\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx
\f0\b0 \cf2 $ cd sites-available\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ cd /var/www/matomo\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /var/www/matomo
\f0\b0 \cf2 $ ls\
CHANGELOG.md     LEGALNOTICE  LegacyAutoloader.php  README.md    
\f1\b \cf4 config
\f0\b0 \cf2    
\f1\b \cf4 core
\f0\b0 \cf2        
\f1\b \cf4 js
\f0\b0 \cf2     
\f1\b \cf4 libs
\f0\b0 \cf2        matomo.php  piwik.js   
\f1\b \cf4 plugins
\f0\b0 \cf2   
\f1\b \cf4 tmp
\f0\b0 \cf2 \
CONTRIBUTING.md  LICENSE      PRIVACY.md            SECURITY.md  
\f1\b \cf3 console
\f0\b0 \cf2   index.php  
\f1\b \cf4 lang
\f0\b0 \cf2   matomo.js  
\f1\b \cf4 misc
\f0\b0 \cf2         piwik.php  
\f1\b \cf4 tests
\f0\b0 \cf2     
\f1\b \cf4 vendor
\f0\b0 \cf2 \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /var/www/matomo
\f0\b0 \cf2 $ cd /etc/nginx/sites-available\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano matomo.conf \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nginx -t\
nginx: [warn] server name "http://matomo.cafebuenvivir.com" has suspicious symbols in /etc/nginx/sites-enabled/matomo.conf:4\
nginx: [warn] server name "https://matomo.cafebuenvivir.com" has suspicious symbols in /etc/nginx/sites-enabled/matomo.conf:13\
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\
nginx: configuration file /etc/nginx/nginx.conf test is successful\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano matomo.conf \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano matomo.conf \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nginx -t\
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\
nginx: configuration file /etc/nginx/nginx.conf test is successful\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo systemctl restart nginx\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo nano matomo.conf \

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git@github.com:gabrielpaipa/PlzWorkMatomoNNginx.git\
-su: git@github.com:gabrielpaipa/PlzWorkMatomoNNginx.git: No such file or directory\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git add matomo.conf\
fatal: not a git repository (or any of the parent directories): .git\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git init\
/etc/nginx/sites-available/.git: Permission denied\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git init\
Initialized empty Git repository in /etc/nginx/sites-available/.git/\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git add matomo.conf\
fatal: Unable to create '/etc/nginx/sites-available/.git/index.lock': Permission denied\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git add matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git commit -m "First commit Message"\
fatal: Unable to create '/etc/nginx/sites-available/.git/index.lock': Permission denied\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git commit -m "First commit Message"\
[master (root-commit) e020e9e] First commit Message\
 Committer: root <root@ip-172-31-1-96.us-east-2.compute.internal>\
Your name and email address were configured automatically based\
on your username and hostname. Please check that they are accurate.\
You can suppress this message by setting them explicitly. Run the\
following command and follow the instructions in your editor to edit\
your configuration file:\
\
    git config --global --edit\
\
After doing this, you may fix the identity used for this commit with:\
\
    git commit --amend --reset-author\
\
 1 file changed, 92 insertions(+)\
 create mode 100644 matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git remote add origin git@github.com:gabrielpaipa/PlzWorkMatomoNNginx.git\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git push origin master\
The authenticity of host 'github.com (140.82.114.4)' can't be established.\
RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.\
Are you sure you want to continue connecting (yes/no)? y\
Please type 'yes' or 'no': yes\
Warning: Permanently added 'github.com,140.82.114.4' (RSA) to the list of known hosts.\
git@github.com: Permission denied (publickey).\
fatal: Could not read from remote repository.\
\
Please make sure you have the correct access rights\
and the repository exists.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git push -u origin master\
Warning: Permanently added the RSA host key for IP address '140.82.112.4' to the list of known hosts.\
git@github.com: Permission denied (publickey).\
fatal: Could not read from remote repository.\
\
Please make sure you have the correct access rights\
and the repository exists.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git remote add origin https://github.com/gabrielpaipa/PlzWorkMatomoNNginx.git\
fatal: remote origin already exists.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git push origin master\
The authenticity of host 'github.com (140.82.114.4)' can't be established.\
RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.\
Are you sure you want to continue connecting (yes/no)? yes\
Warning: Permanently added 'github.com,140.82.114.4' (RSA) to the list of known hosts.\
git@github.com: Permission denied (publickey).\
fatal: Could not read from remote repository.\
\
Please make sure you have the correct access rights\
and the repository exists.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git push -u origin master\
git@github.com: Permission denied (publickey).\
fatal: Could not read from remote repository.\
\
Please make sure you have the correct access rights\
and the repository exists.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ ls -al ~/.ssh\
total 12\
drwx------ 2 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 .
\f0\b0 \cf2 \
drwxr-xr-x 9 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 ..
\f0\b0 \cf2 \
-rw-r--r-- 1 ussr ussr 1326 Aug 31 17:00 known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ eval "$(ssh-agent -s)"\
Agent pid 24178\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ open ~/.ssh/config\
Couldn't get a file descriptor referring to the console\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ ssh-add -K ~/.ssh/id_rsa\
unknown option -- K\
usage: ssh-add [options] [file ...]\
Options:\
  -l          List fingerprints of all identities.\
  -E hash     Specify hash algorithm used for fingerprints.\
  -L          List public key parameters of all identities.\
  -k          Load only keys and not certificates.\
  -c          Require confirmation to sign using identities\
  -t life     Set lifetime (in seconds) when adding identities.\
  -d          Delete identity.\
  -D          Delete all identities.\
  -x          Lock agent.\
  -X          Unlock agent.\
  -s pkcs11   Add keys from PKCS#11 provider.\
  -e pkcs11   Remove keys provided by PKCS#11 provider.\
  -q          Be quiet after a successful operation.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ ls -al ~/.ssh\
total 12\
drwx------ 2 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 .
\f0\b0 \cf2 \
drwxr-xr-x 9 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 ..
\f0\b0 \cf2 \
-rw-r--r-- 1 ussr ussr 1326 Aug 31 17:00 known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ cd ~/.ssh\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ls\
known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ls -al ~/.ssh\
total 12\
drwx------ 2 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 .
\f0\b0 \cf2 \
drwxr-xr-x 9 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 ..
\f0\b0 \cf2 \
-rw-r--r-- 1 ussr ussr 1326 Aug 31 17:00 known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ cd known hosts\
-su: cd: too many arguments\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ls\
known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ cd known_hosts\
-su: cd: known_hosts: Not a directory\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ls -al\
total 12\
drwx------ 2 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 .
\f0\b0 \cf2 \
drwxr-xr-x 9 ussr ussr 4096 Aug 31 16:59 
\f1\b \cf4 ..
\f0\b0 \cf2 \
-rw-r--r-- 1 ussr ussr 1326 Aug 31 17:00 known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ssh-add -l\
The agent has no identities.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ssh-keygen -t rsa -b 4096 -C "gabrielpaipa@gmail.com"\
Generating public/private rsa key pair.\
Enter file in which to save the key (/home/ussr/.ssh/id_rsa): \
Enter passphrase (empty for no passphrase): \
Enter same passphrase again: \
Passphrases do not match.  Try again.\
Enter passphrase (empty for no passphrase): \
Enter same passphrase again: \
Your identification has been saved in /home/ussr/.ssh/id_rsa.\
Your public key has been saved in /home/ussr/.ssh/id_rsa.pub.\
The key fingerprint is:\
SHA256:ku9S3bYnaI9kF2dxgMCRBLjjAMOzDJCtwLwhJRWvm9A gabrielpaipa@gmail.com\
The key's randomart image is:\
+---[RSA 4096]----+\
|**+.   ..+++ ..  |\
|==*.  .   o .  . |\
|o+o=.  .      . .|\
|.oo.. o.       o |\
|. E  oo.S. .. o  |\
| . o  .o. . o+   |\
|  o    .. oo..   |\
|      .. oooo .  |\
|       ......o   |\
+----[SHA256]-----+\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ eval "$(ssh-agent -s)"\
Agent pid 24365\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ssh-add ~/.ssh/id_rsa\
Enter passphrase for /home/ussr/.ssh/id_rsa: \
Identity added: /home/ussr/.ssh/id_rsa (/home/ussr/.ssh/id_rsa)\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ pbcopy < ~/.ssh/id_rsa.pub\
\
Command 'pbcopy' not found, did you mean:\
\
  command 'bcopy' from deb bacula-sd\
\
Try: sudo apt install <deb name>\
\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ ls\
id_rsa  id_rsa.pub  known_hosts\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ nano id_rsa.pub\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ vim id_rsa.pub\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 ~/.ssh
\f0\b0 \cf2 $ cd /etc/nginx/sites-available\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git init\
error: could not lock config file /etc/nginx/sites-available/.git/config: Permission denied\
fatal: could not set 'core.repositoryformatversion' to '0'\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git init\
[sudo] password for ussr: \
Reinitialized existing Git repository in /etc/nginx/sites-available/.git/\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git add matomo.conf\
fatal: Unable to create '/etc/nginx/sites-available/.git/index.lock': Permission denied\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git matomo.conf\
git: 'matomo.conf' is not a git command. See 'git --help'.\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git add matomo.conf\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ git commit -m "What am I doing"\
fatal: Unable to create '/etc/nginx/sites-available/.git/index.lock': Permission denied\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ sudo git commit -m "What am I doing"\
On branch master\
Untracked files:\
	\cf6 cafebuenvivir.com-ssl.conf\cf2 \
	\cf6 cafebuenvivir.com.conf\cf2 \
	\cf6 default\cf2 \
\
nothing added to commit but untracked files present\

\f1\b \cf3 ussr@ip-172-31-1-96
\f0\b0 \cf2 :
\f1\b \cf4 /etc/nginx/sites-available
\f0\b0 \cf2 $ vim matomo.conf\
\
\
    ## only allow accessing the following php files\
    location ~ ^/(index|matomo|piwik|js/index|plugins/HeatmapSessionRecording/configs)\\.php \{\
        include snippets/fastcgi-php.conf; # if your Nginx setup doesn't come with a default fastcgi-php config, you can fetch it from https://github.com/nginx/nginx/blob/master/conf/fastcgi.conf\
#        try_files $fastcgi_script_name =404; # protects against CVE-2019-11043. If this line is already included in your snippets/fastcgi-php.conf you can comment it here.\
        fastcgi_param HTTP_PROXY ""; # prohibit httpoxy: https://httpoxy.org/\
        fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; #replace with the path to your PHP socket file\
        #fastcgi_pass 127.0.0.1:9000; # uncomment if you are using PHP via TCP sockets (e.g. Docker container)\
    \}\
\
    ## deny access to all other .php files\
    location ~* ^.+\\.php$ \{\
        deny all;\
        return 403;\
    \}\
\
    ## serve all other files normally\
    location / \{\
        try_files $uri $uri/ =404;\
    \}\
\
    ## disable all access to the following directories\
    location ~ ^/(config|tmp|core|lang) \{\
        deny all;\
        return 403; # replace with 404 to not show these directories exist\
    \}\
\
    location ~ /\\.ht \{\
        deny  all;\
        return 403;\
    \}\
\
    location ~ js/container_.*_preview\\.js$ \{\
        expires off;\
        add_header Cache-Control 'private, no-cache, no-store';\
    \}\
\
    location ~ \\.(gif|ico|jpg|png|svg|js|css|htm|html|mp3|mp4|wav|ogg|avi|ttf|eot|woff|woff2|json)$ \{\
        allow all;\
        ## Cache images,CSS,JS and webfonts for an hour\
        ## Increasing the duration may improve the load-time, but may cause old files to show after an Matomo upgrade\
        expires 1h;\
        add_header Pragma public;\
        add_header Cache-Control "public";\
    \}\
\
    location ~ ^/(libs|vendor|plugins|misc/user|node_modules) \{\
        deny all;\
        return 403;\
    \}\
\
    ## properly display textfiles in root directory\
    location ~/(.*\\.md|LEGALNOTICE|LICENSE) \{\
        default_type text/plain;\
    \}\
\}\
}